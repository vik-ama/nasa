"use strict";var api_key="rxfavOxSlJLbLWKUthAoaUR2K2XwALYOj0xGUzc7",main=document.querySelector("#main"),paramDay=document.querySelector("#param_day"),paramCamera=document.querySelector("#param_camera"),paramRover=document.querySelector("#param_rover"),search=document.querySelector("#search"),mars_photos=document.querySelector("#mars_photos"),date=(new Date).toISOString().slice(0,10);paramDay.setAttribute("value",date),console.log("значение даты: "+paramDay.value);var selectors=[{name:"curiosity",cameras:[{title:"Front Hazard Avoidance Camera",abbr:"FHAZ"},{title:"Rear Hazard Avoidance Camera",abbr:"RHAZ"},{title:"Mast Camera",abbr:"MAST"},{title:"Chemistry and Camera Complex",abbr:"CHEMCAM"},{title:"Mars Hand Lens Imager",abbr:"MAHLI"},{title:"Mars Descent Imager",abbr:"MARDI"},{title:"Navigation Camera",abbr:"NAVCAM"}]},{name:"opportunity",cameras:[{title:"Front Hazard Avoidance Camera",abbr:"FHAZ"},{title:"Rear Hazard Avoidance Camera",abbr:"RHAZ"},{title:"Navigation Camera",abbr:"NAVCAM"},{title:"Panoramic Camera",abbr:"PANCAM"},{title:"Miniature Thermal Emission Spectrometer (Mini-TES)",abbr:"MINITES"}]},{name:"spirit",cameras:[{title:"Front Hazard Avoidance Camera",abbr:"FHAZ"},{title:"Rear Hazard Avoidance Camera",abbr:"RHAZ"},{title:"Navigation Camera",abbr:"NAVCAM"},{title:"Panoramic Camera",abbr:"PANCAM"},{title:"Miniature Thermal Emission Spectrometer (Mini-TES)",abbr:"MINITES"}]}];function generateRover(){selectors.forEach(function(a){var e=document.createElement("option");e.value=a.name,e.innerText=a.name,e.setAttribute("data-item",a),paramRover.appendChild(e)}),generateCameras("curiosity")}function generateCameras(e){console.log("получаем параметр: "+e);var a=selectors.findIndex(function(a){return a.name===e});paramCamera.innerHTML="",selectors[a].cameras.forEach(function(a){var e=document.createElement("option");e.value=a.abbr,e.innerText=a.title,paramCamera.appendChild(e)})}function getNasaBg(a){fetch("https://api.nasa.gov/planetary/apod?date=".concat(a,"&api_key=").concat(api_key)).then(function(a){return a.json()}).then(function(a){main.setAttribute("style","background-image:url("+a.url+");")}).catch(function(a){console.error("чтото прошло не так!"),console.error(a)})}function getNasaMars(a,e,t){fetch("https://api.nasa.gov/mars-photos/api/v1/rovers/".concat(t,"/photos?camera=").concat(a,"&earth_date=").concat(e,"&api_key=").concat(api_key)).then(function(a){return a.json()}).then(function(n){if(console.log(n),console.log("сколько всего фоток: "+n.photos.length),25<n.photos.length){mars_photos.innerHTML="",function(a,e){for(var t=[],r=0;r<a;r++){var o=Math.floor(Math.random()*e);t.unshift(o)}t.forEach(function(a){mars_photos.innerHTML+='<div class="main__block_item" data-id="'.concat(n.photos[a].id,'" data-date="').concat(n.photos[a].earth_date,'" data-rover="').concat(n.photos[a].rover.name,'" data-camera="').concat(n.photos[a].camera.name,'"><img src="').concat(n.photos[a].img_src,'" alt=""></div>')})}(25,n.photos.length),console.log("фоток больше 25")}else if(0<n.photos.length&&n.photos.length<26){mars_photos.innerHTML="";for(var a=0;a<25;a++)mars_photos.innerHTML+='<div class="main__block_item" data-id="'.concat(n.photos[a].id,'" data-date="').concat(n.photos[a].earth_date,'" data-rover="').concat(n.photos[a].rover.name,'" data-camera="').concat(n.photos[a].camera.name,'"><img src="').concat(n.photos[a].img_src,'" alt=""></div>');console.log("фоток меньше 25")}else 0===n.photos.length&&(mars_photos.innerHTML='<div class="main__block_empty">К сожалению фотографий нет! <br>Выберите другие параметры</div>')}).catch(function(a){console.error("чтото прошло не так!"),console.error(a)})}generateRover(),paramDay.addEventListener("change",function(){console.log(paramDay.value)}),paramCamera.addEventListener("change",function(){console.log(paramCamera.value)}),paramRover.addEventListener("change",function(){console.log(paramRover.value),generateCameras(paramRover.value)}),search.addEventListener("click",function(){console.log("жмакнули на кнопку"),getNasaBg(paramDay.value),getNasaMars(paramCamera.value,paramDay.value,paramRover.value)}),getNasaBg(paramDay.value),getNasaMars("MAST","2020-03-06","curiosity");
//# sourceMappingURL=maps/main.min.js.map
