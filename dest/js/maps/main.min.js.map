{"version":3,"sources":["main.js"],"names":["api_key","main","document","querySelector","paramDay","paramCamera","paramRover","mars_photos","Date","setAttribute","date","console","log","value","name","cameras","title","abbr","generateRover","forEach","roverOption","innerText","generateCameras","selectors","item","addEventListener","createElement","appendChild","roverName","findIndex","getNasaMars","index","i","cameraOption","day","json","getNasaBg","random","arrrr","then","response","obj","url","error","innerHTML","earthDate","rover","fetch","concat","camera","photos","length","show","max","Math","floor","unshift","id","earth_date","img_src","selectRandom","search"],"mappings":"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","file":"../main.min.js","sourcesContent":["const api_key = 'rxfavOxSlJLbLWKUthAoaUR2K2XwALYOj0xGUzc7';\nlet main = document.querySelector('#main'),\n    paramDay = document.querySelector('#param_day'),\n    paramCamera = document.querySelector('#param_camera'),\n    paramRover = document.querySelector('#param_rover'),\n    search = document.querySelector('#search'),\n    mars_photos = document.querySelector('#mars_photos');\n\nlet date = new Date().toISOString().slice(0, 10);\n//console.log(date);\nparamDay.setAttribute('value', date);\n\nconsole.log('значение даты: ' + paramDay.value);\n\nlet selectors = [\n    {\n        name: 'curiosity',\n        cameras: [\n            {\n                title: 'Front Hazard Avoidance Camera',\n                abbr: 'FHAZ'\n            },\n            {\n                title: 'Rear Hazard Avoidance Camera',\n                abbr: 'RHAZ'\n            },\n            {\n                title: 'Mast Camera',\n                abbr: 'MAST'\n            },\n            {\n                title: 'Chemistry and Camera Complex',\n                abbr: 'CHEMCAM'\n            },\n            {\n                title: 'Mars Hand Lens Imager',\n                abbr: 'MAHLI'\n            },\n            {\n                title: 'Mars Descent Imager',\n                abbr: 'MARDI'\n            },\n            {\n                title: 'Navigation Camera',\n                abbr: 'NAVCAM'\n            }\n        ]\n    },\n    {\n        name: 'opportunity',\n        cameras: [\n            {\n                title: 'Front Hazard Avoidance Camera',\n                abbr: 'FHAZ'\n            },\n            {\n                title: 'Rear Hazard Avoidance Camera',\n                abbr: 'RHAZ'\n            },\n            {\n                title: 'Navigation Camera',\n                abbr: 'NAVCAM'\n            },\n            {\n                title: 'Panoramic Camera',\n                abbr: 'PANCAM'\n            },\n            {\n                title: 'Miniature Thermal Emission Spectrometer (Mini-TES)',\n                abbr: 'MINITES'\n            }\n        ]\n    },\n    {\n        name: 'spirit',\n        cameras: [\n            {\n                title: 'Front Hazard Avoidance Camera',\n                abbr: 'FHAZ'\n            },\n            {\n                title: 'Rear Hazard Avoidance Camera',\n                abbr: 'RHAZ'\n            },\n            {\n                title: 'Navigation Camera',\n                abbr: 'NAVCAM'\n            },\n            {\n                title: 'Panoramic Camera',\n                abbr: 'PANCAM'\n            },\n            {\n                title: 'Miniature Thermal Emission Spectrometer (Mini-TES)',\n                abbr: 'MINITES'\n            }\n        ]\n    }\n];\n\n//console.log(selectors);\n\nfunction generateRover(){\n    //console.log(selectors[0].name);\n    selectors.forEach((item) => {\n        //console.log(item.name);\n        let roverOption = document.createElement('option');\n        roverOption.value = item.name;\n        roverOption.innerText = item.name;\n        roverOption.setAttribute('data-item', item);\n        paramRover.appendChild(roverOption);\n    });\n\n    generateCameras('curiosity');\n}\ngenerateRover();\n\nfunction generateCameras(roverName){\n\n    console.log('получаем параметр: ' + roverName);\n\n    let index = selectors.findIndex(item => item.name === roverName);\n\n    paramCamera.innerHTML = '';\n    selectors[index].cameras.forEach((i) => {\n        let cameraOption = document.createElement('option');\n        cameraOption.value = i.abbr;\n        cameraOption.innerText = i.title;\n        paramCamera.appendChild(cameraOption);\n    });\n\n}\n\n\n/* смена даты */\nparamDay.addEventListener('change', () => {\n    console.log(paramDay.value);\n});\n/* смена камеры */\nparamCamera.addEventListener('change', () => {\n    console.log(paramCamera.value);\n});\n/* смена марсохода */\nparamRover.addEventListener('change', () => {\n    console.log(paramRover.value);\n    generateCameras(paramRover.value);\n});\n\nsearch.addEventListener('click', () => {\n    console.log('жмакнули на кнопку');\n    getNasaBg(paramDay.value);\n    getNasaMars(paramCamera.value, paramDay.value, paramRover.value);\n});\n\nfunction getNasaBg(day) {\n    fetch(`https://api.nasa.gov/planetary/apod?date=${day}&api_key=${api_key}`).then(function (response){\n        return response.json();\n    }).then(function (obj){\n        //console.log(obj);\n        //ставим фон при клике на кнопочку\n        main.setAttribute('style', 'background-image:url(' + obj.url + ');');\n    }).catch(function (error){\n        console.error('чтото прошло не так!');\n        console.error(error);\n    });\n}\n\n//запускаем функцию и передаем в нее параметры для фона по умолчанию на текущий день\ngetNasaBg(paramDay.value);\n\nfunction getNasaMars(camera, earthDate, rover){\n    fetch(`https://api.nasa.gov/mars-photos/api/v1/rovers/${rover}/photos?camera=${camera}&earth_date=${earthDate}&api_key=${api_key}`).then(function (response){\n        return response.json();\n    }).then(function (obj){\n        console.log(obj);\n        console.log('сколько всего фоток: ' + obj.photos.length);\n        if(obj.photos.length > 25){\n            mars_photos.innerHTML = '';\n            function selectRandom(show, min, max){\n\n                let arrrr = [];\n\n                for(let i = 0; i < show; i++){\n                    let random = Math.floor(Math.random() *  max);\n                    arrrr.unshift(random);\n                }\n                arrrr.forEach((item) => {\n                    mars_photos.innerHTML += `<div class=\"main__block_item\" data-id=\"${obj.photos[item].id}\" data-date=\"${obj.photos[item].earth_date}\" data-rover=\"${obj.photos[item].rover.name}\" data-camera=\"${obj.photos[item].camera.name}\"><img src=\"${obj.photos[item].img_src}\" alt=\"\"></div>`;\n                });\n\n            }\n            selectRandom(25, 0, obj.photos.length);\n            console.log('фоток больше 25');\n        }else if(obj.photos.length > 0 && obj.photos.length < 26){\n            mars_photos.innerHTML = '';\n\n            for(let i = 0; i < 25; i++){\n                mars_photos.innerHTML += `<div class=\"main__block_item\" data-id=\"${obj.photos[i].id}\" data-date=\"${obj.photos[i].earth_date}\" data-rover=\"${obj.photos[i].rover.name}\" data-camera=\"${obj.photos[i].camera.name}\"><img src=\"${obj.photos[i].img_src}\" alt=\"\"></div>`;\n            }\n            console.log('фоток меньше 25');\n\n\n        }else if(obj.photos.length === 0){\n            mars_photos.innerHTML = '<div class=\"main__block_empty\">К сожалению фотографий нет! <br>Выберите другие параметры</div>';\n        }\n\n\n    }).catch(function (error){\n        console.error('чтото прошло не так!');\n        console.error(error);\n    });\n}\ngetNasaMars('MAST', '2020-03-06', 'curiosity');\n\n\n\n\n\n\n\n\n"]}